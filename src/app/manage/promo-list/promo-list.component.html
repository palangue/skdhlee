<div fxLayout='column' fxLayoutGap='16px'>
  <div fxLayoutAlign='end center' [ngStyle]='{"padding-right" : "32px"}'>
    <button mat-raised-button color='primary' (click)='btnAddDevice()'>프로모션 추가</button>
  </div>

  <div [ngStyle]='{"padding" : "16px"}'>
    <table mat-table [dataSource]="promotionDataSource" class="mat-elevation-z8" multiTemplateDataRows>

      <ng-container matColumnDef="coName">
        <th mat-header-cell *matHeaderCellDef> 업체 명 </th>
        <td mat-cell *matCellDef="let element"> {{element.promotion_target_company}} </td>
      </ng-container>

      <ng-container matColumnDef="coCode">
        <th mat-header-cell *matHeaderCellDef> 업체 코드 </th>
        <td mat-cell *matCellDef="let element"> {{element.promotion_target}} </td>
      </ng-container>

      <ng-container matColumnDef="cost">
        <th mat-header-cell *matHeaderCellDef [ngStyle]='{"text-align" : "center"}'> 행사 가격 </th>
        <td mat-cell *matCellDef="let element" [ngStyle]='{"text-align" : "right"}'>
          {{element.bizone_price | number : '1.0-0'}} 원</td>
      </ng-container>

      <ng-container matColumnDef="start">
        <th mat-header-cell *matHeaderCellDef [ngStyle]='{"text-align" : "center"}'> 시작일 </th>
        <td mat-cell *matCellDef="let element" [ngStyle]='{"text-align" : "center"}'>
          {{element.date_start | date : 'yyyy-mm-dd hh:mm:ss'}} </td>
      </ng-container>

      <ng-container matColumnDef="end">
        <th mat-header-cell *matHeaderCellDef [ngStyle]='{"text-align" : "center"}'> 종료일 </th>
        <td mat-cell *matCellDef="let element" [ngStyle]='{"text-align" : "center"}'>
          {{element.date_end | date : 'yyyy-mm-dd hh:mm:ss'}} </td>
      </ng-container>

      <ng-container matColumnDef='expandPromotionDetail'>
        <td mat-cell *matCellDef='let element' [attr.colspan]="displayedColumns.length">
          <div [@promotion_details]="element == expandedElement ? 'expanded' : 'collapsed'"
            class="example-element-detail">
            <table mat-table [dataSource]='element.support' class='mat-elevation-z8'>
              <ng-container matColumnDef='name'>
                <th mat-header-cell *matHeaderCellDef>장비 이름</th>
                <td mat-cell *matCellDef='let elementItem'>{{ elementItem.name }}</td>
              </ng-container>
              <ng-container matColumnDef='price'>
                <th mat-header-cell *matHeaderCellDef>복지 지원금</th>
                <td mat-cell *matCellDef='let elementItem'>{{ elementItem.price | number : '1.0-0'}}</td>
              </ng-container>
              <ng-container matColumnDef='promotion_actions'>
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef='let elementItem'>
                  <button mat-flat-button color='primary' (click)='promo_item_modify(elementItem, element)'>수정</button>
                  <button mat-flat-button color='primary' (click)='promo_item_delete(elementItem)'>삭제</button>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef='promotionDeviceColumns'></tr>
              <tr mat-row *matRowDef='let row; columns: promotionDeviceColumns;'></tr>
            </table>

            
          </div>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="example-element-row"
        [class.example-expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"></tr>
      <tr mat-row *matRowDef="let row; columns: ['expandPromotionDetail']" class="example-detail-row"></tr>

    </table>
  </div>
</div>